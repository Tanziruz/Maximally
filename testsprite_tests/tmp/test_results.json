[
  {
    "projectId": "d2302281-90d5-47b8-ba6b-0a19f928ca6f",
    "testId": "9ddbb899-7791-4968-b04d-efc1f7373668",
    "userId": "a4784488-80f1-70de-2d83-5dec6933d663",
    "title": "TC001-post api auth register user registration",
    "description": "Test the user registration endpoint to ensure users can register with valid name, email, and password. Verify that the response includes success status, user object, and JWT token. Also verify password is hashed and stored securely.",
    "code": "import requests\nimport uuid\nimport time\n\nBASE_URL = \"http://localhost:3001\"\nREGISTER_ENDPOINT = \"/api/auth/register\"\nHEADERS = {\n    \"Authorization\": \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI1NWVlMDA5OS0wNGU3LTQ2ZGYtODFlZC03ZTlhOTEzYTZmYzUiLCJlbWFpbCI6IlRhbnppcnV6MjVAZ21haWwuY29tIiwiaWF0IjoxNzY3MDA3Njg3LCJleHAiOjE3Njc2MTI0ODd9.PpmhOqjErdNprROET1LwviTjGE4oN0IWoo5cP-CvAos\",\n    \"Content-Type\": \"application/json\"\n}\nTIMEOUT = 30\n\ndef test_post_api_auth_register_user_registration():\n    # Create unique email for registration to avoid conflicts\n    unique_email = f\"testuser_{uuid.uuid4().hex[:8]}@example.com\"\n    payload = {\n        \"name\": \"Test User\",\n        \"email\": unique_email,\n        \"password\": \"SecurePass123!\"\n    }\n    \n    # Register user\n    response = requests.post(\n        BASE_URL + REGISTER_ENDPOINT,\n        headers=HEADERS,\n        json=payload,\n        timeout=TIMEOUT\n    )\n    assert response.status_code == 200, f\"Expected status 200, got {response.status_code}\"\n    resp_json = response.json()\n    # Validate success status\n    assert \"success\" in resp_json, \"'success' field missing in response\"\n    assert resp_json[\"success\"] is True, f\"Expected success True, got {resp_json['success']}\"\n    # Validate user object\n    assert \"user\" in resp_json and isinstance(resp_json[\"user\"], dict), \"'user' object missing or invalid\"\n    user = resp_json[\"user\"]\n    # Validate user fields\n    assert \"id\" in user and isinstance(user[\"id\"], str) and user[\"id\"], \"User id missing or invalid\"\n    assert user.get(\"name\") == payload[\"name\"], f\"User name mismatch: expected {payload['name']}, got {user.get('name')}\"\n    assert user.get(\"email\") == payload[\"email\"], f\"User email mismatch: expected {payload['email']}, got {user.get('email')}\"\n    # Validate token presence\n    assert \"token\" in resp_json and isinstance(resp_json[\"token\"], str) and resp_json[\"token\"], \"'token' missing or invalid\"\n    \n    # Validate that password is not returned in plain text and is presumably hashed\n    # Password should NOT be present in user object\n    assert \"password\" not in user, \"Password should not be returned in user object\"\n    assert \"password_hash\" not in user, \"Password hash should not be returned in user object\"\n    \n    # Additional indirect check for secure password storage - try login with correct password to verify success\n    login_payload = {\n        \"email\": payload[\"email\"],\n        \"password\": payload[\"password\"]\n    }\n    login_resp = requests.post(\n        BASE_URL + \"/api/auth/login\",\n        headers=HEADERS,\n        json=login_payload,\n        timeout=TIMEOUT\n    )\n    assert login_resp.status_code == 200, f\"Login status code expected 200, got {login_resp.status_code}\"\n    login_json = login_resp.json()\n    assert login_json.get(\"success\") is True, \"Login success expected True\"\n    assert \"token\" in login_json and login_json[\"token\"], \"Login token missing or empty\"\n\ntest_post_api_auth_register_user_registration()",
    "testStatus": "FAILED",
    "testError": "Traceback (most recent call last):\n  File \"/var/task/handler.py\", line 258, in run_with_retry\n    exec(code, exec_env)\n  File \"<string>\", line 65, in <module>\n  File \"<string>\", line 29, in test_post_api_auth_register_user_registration\nAssertionError: Expected status 200, got 201\n",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-12-29T11:32:38.427Z",
    "modified": "2025-12-29T11:33:33.389Z"
  },
  {
    "projectId": "d2302281-90d5-47b8-ba6b-0a19f928ca6f",
    "testId": "a7541797-f5ec-4dad-94c6-8064da1a360d",
    "userId": "a4784488-80f1-70de-2d83-5dec6933d663",
    "title": "TC002-post api auth login user login",
    "description": "Test the user login endpoint with valid and invalid credentials. Verify that successful login returns success status, user object, and JWT token. Verify invalid credentials return appropriate error.",
    "code": "import requests\n\nBASE_URL = \"http://localhost:3001\"\nLOGIN_ENDPOINT = \"/api/auth/login\"\nTIMEOUT = 30\n\n\ndef test_post_api_auth_login_user_login():\n    headers = {\n        \"Content-Type\": \"application/json\"\n    }\n\n    # Valid credentials (assuming a known valid user - replace with a valid test user)\n    valid_payload = {\n        \"email\": \"Tanziruz25@gmail.com\",\n        \"password\": \"CorrectPassword123!\"\n    }\n\n    # Invalid credentials\n    invalid_payload = {\n        \"email\": \"Tanziruz25@gmail.com\",\n        \"password\": \"WrongPassword!\"\n    }\n\n    # Test with valid credentials\n    try:\n        response = requests.post(\n            f\"{BASE_URL}{LOGIN_ENDPOINT}\",\n            json=valid_payload,\n            headers=headers,\n            timeout=TIMEOUT,\n        )\n    except requests.RequestException as e:\n        assert False, f\"Valid login request failed: {e}\"\n\n    assert response.status_code == 200, f\"Expected status 200 but got {response.status_code}\"\n    json_response = response.json()\n    assert isinstance(json_response, dict), \"Response is not a JSON object\"\n    assert \"success\" in json_response and isinstance(json_response[\"success\"], bool), \"Missing or invalid 'success' in response\"\n    assert json_response[\"success\"] is True, \"'success' is False for valid login\"\n    assert \"user\" in json_response and isinstance(json_response[\"user\"], dict), \"'user' object missing or invalid in response\"\n    assert \"token\" in json_response and isinstance(json_response[\"token\"], str) and len(json_response[\"token\"]) > 0, \"JWT token missing or invalid in response\"\n\n    # Test with invalid credentials\n    try:\n        invalid_response = requests.post(\n            f\"{BASE_URL}{LOGIN_ENDPOINT}\",\n            json=invalid_payload,\n            headers=headers,\n            timeout=TIMEOUT,\n        )\n    except requests.RequestException as e:\n        # It's acceptable to get an error for invalid credentials; handle below\n        invalid_response = None\n        error = e\n\n    if invalid_response is not None:\n        # Expecting a 4xx error status code for invalid login\n        assert invalid_response.status_code in (400, 401, 403), f\"Expected client error status for invalid login, got {invalid_response.status_code}\"\n        try:\n            invalid_json = invalid_response.json()\n            assert isinstance(invalid_json, dict), \"Invalid login response is not JSON\"\n            assert \"success\" in invalid_json and invalid_json[\"success\"] is False, \"'success' should be False for invalid login\"\n            # There may be an error message or code to check\n            assert any(k in invalid_json for k in (\"error\", \"message\", \"errors\")), \"Error message missing in invalid login response\"\n        except ValueError:\n            # Response is not JSON\n            assert False, \"Invalid login response is not valid JSON\"\n    else:\n        # If exception occurred, ensure it's authentication error related\n        assert \"401\" in str(error) or \"403\" in str(error), f\"Unexpected error on invalid login: {error}\"\n\n\ntest_post_api_auth_login_user_login()\n",
    "testStatus": "FAILED",
    "testError": "Traceback (most recent call last):\n  File \"/var/task/handler.py\", line 258, in run_with_retry\n    exec(code, exec_env)\n  File \"<string>\", line 74, in <module>\n  File \"<string>\", line 36, in test_post_api_auth_login_user_login\nAssertionError: Expected status 200 but got 401\n",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-12-29T11:32:38.433Z",
    "modified": "2025-12-29T11:33:26.170Z"
  },
  {
    "projectId": "d2302281-90d5-47b8-ba6b-0a19f928ca6f",
    "testId": "1aa89b8a-9fa2-45c6-971c-4069dd2a724e",
    "userId": "a4784488-80f1-70de-2d83-5dec6933d663",
    "title": "TC003-get api auth me get current authenticated user",
    "description": "Test the endpoint to get current authenticated user details. Verify that a valid JWT token returns success status and user object. Verify that missing or invalid token returns unauthorized error.",
    "code": "import requests\n\nBASE_URL = \"http://localhost:3001\"\nAUTH_HEADER = {\"Authorization\": \"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI1NWVlMDA5OS0wNGU3LTQ2ZGYtODFlZC03ZTlhOTEzYTZmYzUiLCJlbWFpbCI6IlRhbnppcnV6MjVAZ21haWwuY29tIiwiaWF0IjoxNzY3MDA3Njg3LCJleHAiOjE3Njc2MTI0ODd9.PpmhOqjErdNprROET1LwviTjGE4oN0IWoo5cP-CvAos\"}\nTIMEOUT = 30\n\ndef test_get_authenticated_user():\n    url = f\"{BASE_URL}/api/auth/me\"\n\n    # Test with valid token\n    try:\n        response = requests.get(url, headers=AUTH_HEADER, timeout=TIMEOUT)\n        assert response.status_code == 200, f\"Expected status 200, got {response.status_code}\"\n        json_resp = response.json()\n        assert isinstance(json_resp, dict), \"Response is not a JSON object\"\n        assert \"success\" in json_resp, \"Response missing 'success' field\"\n        if json_resp.get(\"success\"):\n            user = json_resp.get(\"user\")\n            assert user is not None and isinstance(user, dict), \"User object missing or invalid\"\n            assert \"email\" in user, \"User object missing 'email' field\"\n            assert isinstance(user[\"email\"], str) and len(user[\"email\"]) > 0, \"User email missing or invalid\"\n        else:\n            assert False, \"API returned success:false unexpectedly\"\n    except requests.RequestException as e:\n        assert False, f\"Request failed: {e}\"\n\n    # Test missing token\n    try:\n        response = requests.get(url, timeout=TIMEOUT)\n        assert response.status_code == 401 or response.status_code == 403, f\"Expected 401/403 status for missing token, got {response.status_code}\"\n    except requests.RequestException as e:\n        assert False, f\"Request failed: {e}\"\n\n    # Test invalid token\n    invalid_headers = {\"Authorization\": \"Bearer invalidtoken123\"}\n    try:\n        response = requests.get(url, headers=invalid_headers, timeout=TIMEOUT)\n        assert response.status_code == 401 or response.status_code == 403, f\"Expected 401/403 status for invalid token, got {response.status_code}\"\n    except requests.RequestException as e:\n        assert False, f\"Request failed: {e}\"\n\ntest_get_authenticated_user()\n",
    "testStatus": "FAILED",
    "testError": "Traceback (most recent call last):\n  File \"/var/task/handler.py\", line 258, in run_with_retry\n    exec(code, exec_env)\n  File \"<string>\", line 42, in <module>\n  File \"<string>\", line 19, in test_get_authenticated_user\nAssertionError: User object missing or invalid\n",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-12-29T11:32:38.439Z",
    "modified": "2025-12-29T11:33:36.826Z"
  },
  {
    "projectId": "d2302281-90d5-47b8-ba6b-0a19f928ca6f",
    "testId": "f56f019a-9b93-4786-915a-c902b5890739",
    "userId": "a4784488-80f1-70de-2d83-5dec6933d663",
    "title": "TC004-post api chat send message to ai chat",
    "description": "Test sending a message to the AI chat endpoint. Verify that the response includes success status, conversationId, AI response message, and optionally a workflow object representing generated workflow definitions.",
    "code": "import requests\n\nBASE_URL = \"http://localhost:3001\"\nTOKEN = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI1NWVlMDA5OS0wNGU3LTQ2ZGYtODFlZC03ZTlhOTEzYTZmYzUiLCJlbWFpbCI6IlRhbnppcnV6MjVAZ21haWwuY29tIiwiaWF0IjoxNzY3MDA3Njg3LCJleHAiOjE3Njc2MTI0ODd9.PpmhOqjErdNprROET1LwviTjGE4oN0IWoo5cP-CvAos\"\nHEADERS = {\n    \"Authorization\": f\"Bearer {TOKEN}\",\n    \"Content-Type\": \"application/json\"\n}\n\ndef test_post_api_chat_send_message_to_ai_chat():\n    url = f\"{BASE_URL}/api/chat\"\n    payload = {\n        \"message\": \"Hello AI, please help me create a workflow to send reminder emails.\"\n    }\n\n    try:\n        response = requests.post(url, json=payload, headers=HEADERS, timeout=30)\n        response.raise_for_status()\n        data = response.json()\n\n        assert isinstance(data, dict), \"Response is not a JSON object.\"\n        assert \"success\" in data, \"'success' key missing in response.\"\n        assert data[\"success\"] is True, f\"API call unsuccessful: {data}\"\n\n        assert \"conversationId\" in data, \"'conversationId' missing in response.\"\n        conversation_id = data[\"conversationId\"]\n        assert isinstance(conversation_id, str) and conversation_id.strip() != \"\", \"'conversationId' is empty or not a string.\"\n\n        assert \"response\" in data, \"'response' key missing in response.\"\n        ai_response = data[\"response\"]\n        assert isinstance(ai_response, str) and ai_response.strip() != \"\", \"'response' is empty or not a string.\"\n\n        # workflow object is optional\n        if \"workflow\" in data:\n            workflow = data[\"workflow\"]\n            assert isinstance(workflow, dict), \"'workflow' should be an object if present.\"\n            # Optionally more detailed schema validation can be added here\n\n    except requests.exceptions.RequestException as e:\n        assert False, f\"Request failed: {e}\"\n\ntest_post_api_chat_send_message_to_ai_chat()",
    "testStatus": "FAILED",
    "testError": "Traceback (most recent call last):\n  File \"<string>\", line 18, in test_post_api_chat_send_message_to_ai_chat\n  File \"/var/task/requests/models.py\", line 1024, in raise_for_status\n    raise HTTPError(http_error_msg, response=self)\nrequests.exceptions.HTTPError: 404 Client Error: Not Found for url: http://localhost:3001/api/chat\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/var/task/handler.py\", line 258, in run_with_retry\n    exec(code, exec_env)\n  File \"<string>\", line 42, in <module>\n  File \"<string>\", line 40, in test_post_api_chat_send_message_to_ai_chat\nAssertionError: Request failed: 404 Client Error: Not Found for url: http://localhost:3001/api/chat\n",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-12-29T11:32:38.445Z",
    "modified": "2025-12-29T11:33:03.970Z"
  },
  {
    "projectId": "d2302281-90d5-47b8-ba6b-0a19f928ca6f",
    "testId": "94ca6406-e423-4f2e-b500-783763c35cab",
    "userId": "a4784488-80f1-70de-2d83-5dec6933d663",
    "title": "TC005-get api workflows get all user workflows",
    "description": "Test retrieving all workflows for the authenticated user. Verify that the response includes success status and an array of workflows belonging to the user.",
    "code": "import requests\n\nBASE_URL = \"http://localhost:3001\"\nTOKEN = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI1NWVlMDA5OS0wNGU3LTQ2ZGYtODFlZC03ZTlhOTEzYTZmYzUiLCJlbWFpbCI6IlRhbnppcnV6MjVAZ21haWwuY29tIiwiaWF0IjoxNzY3MDA3Njg3LCJleHAiOjE3Njc2MTI0ODd9.PpmhOqjErdNprROET1LwviTjGE4oN0IWoo5cP-CvAos\"\nHEADERS = {\n    \"Authorization\": f\"Bearer {TOKEN}\",\n    \"Content-Type\": \"application/json\",\n    \"Accept\": \"application/json\"\n}\n\ndef test_get_all_user_workflows():\n    try:\n        # Send GET request to retrieve all workflows for the authenticated user\n        response = requests.get(f\"{BASE_URL}/api/workflows\", headers=HEADERS, timeout=30)\n        response.raise_for_status()\n    except requests.RequestException as e:\n        assert False, f\"Request failed: {e}\"\n\n    data = response.json()\n\n    # Validate that response includes success status and workflows array\n    assert isinstance(data, dict), f\"Response is not a JSON object: {data}\"\n    assert \"success\" in data, \"'success' field missing in response\"\n    assert isinstance(data[\"success\"], bool), \"'success' field is not boolean\"\n    assert data[\"success\"] is True, \"API did not return success status\"\n\n    assert \"workflows\" in data, \"'workflows' field missing in response\"\n    assert isinstance(data[\"workflows\"], list), \"'workflows' field is not an array\"\n\n    # Optionally validate workflow objects structure if workflows exist\n    for workflow in data[\"workflows\"]:\n        assert isinstance(workflow, dict), \"Each workflow should be an object\"\n        # Minimal fields validation\n        assert \"id\" in workflow, \"Workflow missing 'id'\"\n        assert \"name\" in workflow, \"Workflow missing 'name'\"\n        assert \"trigger\" in workflow, \"Workflow missing 'trigger'\"\n        assert \"steps\" in workflow, \"Workflow missing 'steps'\"\n\ntest_get_all_user_workflows()",
    "testStatus": "FAILED",
    "testError": "Traceback (most recent call last):\n  File \"/var/task/handler.py\", line 258, in run_with_retry\n    exec(code, exec_env)\n  File \"<string>\", line 39, in <module>\n  File \"<string>\", line 27, in test_get_all_user_workflows\nAssertionError: 'workflows' field missing in response\n",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-12-29T11:32:38.451Z",
    "modified": "2025-12-29T11:33:08.830Z"
  },
  {
    "projectId": "d2302281-90d5-47b8-ba6b-0a19f928ca6f",
    "testId": "1e5b5f22-18fc-46b5-8eca-cf9823d54615",
    "userId": "a4784488-80f1-70de-2d83-5dec6933d663",
    "title": "TC006-post api workflows create new workflow",
    "description": "Test creating a new workflow with valid name, description, trigger, and steps. Verify that the response includes success status and the created workflow object.",
    "code": "import requests\n\nBASE_URL = \"http://localhost:3001\"\nTOKEN = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI1NWVlMDA5OS0wNGU3LTQ2ZGYtODFlZC03ZTlhOTEzYTZmYzUiLCJlbWFpbCI6IlRhbnppcnV6MjVAZ21haWwuY29tIiwiaWF0IjoxNzY3MDA3Njg3LCJleHAiOjE3Njc2MTI0ODd9.PpmhOqjErdNprROET1LwviTjGE4oN0IWoo5cP-CvAos\"\n\ndef test_post_api_workflows_create_new_workflow():\n    url = f\"{BASE_URL}/api/workflows\"\n    headers = {\n        \"Authorization\": f\"Bearer {TOKEN}\",\n        \"Content-Type\": \"application/json\"\n    }\n\n    payload = {\n        \"name\": \"Test Workflow\",\n        \"description\": \"This is a test workflow created by automated test.\",\n        \"trigger\": {\n            \"type\": \"manual\"\n        },\n        \"steps\": [\n            {\n                \"id\": \"step1\",\n                \"type\": \"httpRequest\",\n                \"configuration\": {\n                    \"method\": \"GET\",\n                    \"url\": \"https://jsonplaceholder.typicode.com/todos/1\"\n                }\n            },\n            {\n                \"id\": \"step2\",\n                \"type\": \"email\",\n                \"configuration\": {\n                    \"to\": \"test@example.com\",\n                    \"subject\": \"Test Workflow Email\",\n                    \"body\": \"This is a test email sent by the workflow.\"\n                }\n            }\n        ]\n    }\n\n    response = None\n    workflow_id = None\n    try:\n        response = requests.post(url, json=payload, headers=headers, timeout=30)\n        assert response.status_code == 200, f\"Unexpected status code: {response.status_code}\"\n        resp_json = response.json()\n        assert isinstance(resp_json, dict), \"Response is not a JSON object\"\n        assert resp_json.get(\"success\") is True, f\"Expected success true but got {resp_json.get('success')}\"\n        workflow = resp_json.get(\"workflow\")\n        assert isinstance(workflow, dict), \"Workflow object missing or not a dict\"\n        # Check fields of the returned workflow object\n        assert \"id\" in workflow and isinstance(workflow[\"id\"], str) and workflow[\"id\"], \"Workflow ID is missing or invalid\"\n        assert workflow.get(\"name\") == payload[\"name\"], \"Workflow name mismatch\"\n        assert workflow.get(\"description\") == payload[\"description\"], \"Workflow description mismatch\"\n        assert isinstance(workflow.get(\"trigger\"), dict), \"Workflow trigger missing or invalid\"\n        assert isinstance(workflow.get(\"steps\"), list), \"Workflow steps missing or invalid\"\n        workflow_id = workflow[\"id\"]\n    finally:\n        if workflow_id:\n            del_url = f\"{BASE_URL}/api/workflows/{workflow_id}\"\n            try:\n                del_resp = requests.delete(del_url, headers=headers, timeout=30)\n                assert del_resp.status_code == 200 or del_resp.status_code == 204, f\"Failed to delete workflow, status code: {del_resp.status_code}\"\n                del_resp_json = del_resp.json()\n                assert del_resp_json.get(\"success\") is True, \"Delete workflow response success false\"\n            except Exception:\n                # Ignore exceptions during cleanup\n                pass\n\ntest_post_api_workflows_create_new_workflow()\n",
    "testStatus": "FAILED",
    "testError": "Traceback (most recent call last):\n  File \"/var/task/handler.py\", line 258, in run_with_retry\n    exec(code, exec_env)\n  File \"<string>\", line 69, in <module>\n  File \"<string>\", line 44, in test_post_api_workflows_create_new_workflow\nAssertionError: Unexpected status code: 400\n",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-12-29T11:32:38.456Z",
    "modified": "2025-12-29T11:33:34.767Z"
  },
  {
    "projectId": "d2302281-90d5-47b8-ba6b-0a19f928ca6f",
    "testId": "7adb2de3-75b1-412d-9b4b-e411aaffd527",
    "userId": "a4784488-80f1-70de-2d83-5dec6933d663",
    "title": "TC007-get api workflows id get specific workflow by id",
    "description": "Test retrieving a specific workflow by its ID. Verify that the response includes success status and the workflow object if it exists. Verify appropriate error if workflow not found.",
    "code": "import requests\n\nBASE_URL = \"http://localhost:3001\"\nTOKEN = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI1NWVlMDA5OS0wNGU3LTQ2ZGYtODFlZC03ZTlhOTEzYTZmYzUiLCJlbWFpbCI6IlRhbnppcnV6MjVAZ21haWwuY29tIiwiaWF0IjoxNzY3MDA3Njg3LCJleHAiOjE3Njc2MTI0ODd9.PpmhOqjErdNprROET1LwviTjGE4oN0IWoo5cP-CvAos\"\nHEADERS = {\n    \"Authorization\": f\"Bearer {TOKEN}\",\n    \"Content-Type\": \"application/json\",\n}\n\ndef test_get_specific_workflow_by_id():\n    # Step 1: Create a new workflow to ensure resource exists\n    workflow_data = {\n        \"name\": \"Test Workflow TC007\",\n        \"description\": \"Workflow created for testing get specific workflow by ID\",\n        \"trigger\": {\"type\": \"manual\"},\n        \"steps\": []\n    }\n\n    workflow_id = None\n\n    try:\n        create_resp = requests.post(\n            f\"{BASE_URL}/api/workflows\",\n            headers=HEADERS,\n            json=workflow_data,\n            timeout=30\n        )\n        assert create_resp.status_code in (200, 201)\n        create_json = create_resp.json()\n        assert create_json.get(\"success\") == True\n        workflow = create_json.get(\"workflow\")\n        assert isinstance(workflow, dict)\n        workflow_id = workflow.get(\"id\")\n        assert isinstance(workflow_id, str) and len(workflow_id) > 0\n\n        # Step 2: Retrieve the workflow by ID (success case)\n        get_resp = requests.get(\n            f\"{BASE_URL}/api/workflows/{workflow_id}\",\n            headers=HEADERS,\n            timeout=30\n        )\n        assert get_resp.status_code == 200\n        get_json = get_resp.json()\n        assert get_json.get(\"success\") == True\n        retrieved_workflow = get_json.get(\"workflow\")\n        assert isinstance(retrieved_workflow, dict)\n        assert retrieved_workflow.get(\"id\") == workflow_id\n        assert retrieved_workflow.get(\"name\") == workflow_data[\"name\"]\n\n        # Step 3: Attempt to retrieve a non-existent workflow (error case)\n        fake_id = \"00000000-0000-0000-0000-000000000000\"\n        get_notfound_resp = requests.get(\n            f\"{BASE_URL}/api/workflows/{fake_id}\",\n            headers=HEADERS,\n            timeout=30\n        )\n        # The API might return 404 or 200 with success false - handle both\n        if get_notfound_resp.status_code == 404:\n            # Expected not found HTTP status\n            pass\n        else:\n            get_notfound_json = get_notfound_resp.json()\n            assert get_notfound_resp.status_code in (400, 404, 200)\n            # If success field exists, it should be False\n            if \"success\" in get_notfound_json:\n                assert get_notfound_json.get(\"success\") == False\n\n    finally:\n        if workflow_id:\n            # Cleanup - delete the test workflow\n            try:\n                del_resp = requests.delete(\n                    f\"{BASE_URL}/api/workflows/{workflow_id}\",\n                    headers=HEADERS,\n                    timeout=30\n                )\n                # Consider 200 or 204 as success for delete\n                assert del_resp.status_code in (200, 204)\n                del_json = del_resp.json() if del_resp.status_code == 200 else {}\n                if del_json:\n                    assert del_json.get(\"success\") == True\n            except Exception:\n                pass\n\ntest_get_specific_workflow_by_id()\n",
    "testStatus": "FAILED",
    "testError": "Traceback (most recent call last):\n  File \"/var/task/handler.py\", line 258, in run_with_retry\n    exec(code, exec_env)\n  File \"<string>\", line 85, in <module>\n  File \"<string>\", line 28, in test_get_specific_workflow_by_id\nAssertionError\n",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-12-29T11:32:38.462Z",
    "modified": "2025-12-29T11:33:43.705Z"
  },
  {
    "projectId": "d2302281-90d5-47b8-ba6b-0a19f928ca6f",
    "testId": "41e5070d-1bf2-4f85-91ab-df638e8395a0",
    "userId": "a4784488-80f1-70de-2d83-5dec6933d663",
    "title": "TC008-put api workflows id update workflow",
    "description": "Test updating an existing workflow with optional fields such as name, description, trigger, steps, and enabled status. Verify that the response includes success status and the updated workflow object.",
    "code": "import requests\n\nBASE_URL = \"http://localhost:3001\"\nTOKEN = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI1NWVlMDA5OS0wNGU3LTQ2ZGYtODFlZC03ZTlhOTEzYTZmYzUiLCJlbWFpbCI6IlRhbnppcnV6MjVAZ21haWwuY29tIiwiaWF0IjoxNzY3MDA3Njg3LCJleHAiOjE3Njc2MTI0ODd9.PpmhOqjErdNprROET1LwviTjGE4oN0IWoo5cP-CvAos\"\nHEADERS = {\n    \"Authorization\": f\"Bearer {TOKEN}\",\n    \"Content-Type\": \"application/json\"\n}\nTIMEOUT = 30\n\ndef test_put_api_workflows_id_update_workflow():\n    workflow_id = None\n    # First create a new workflow to update\n    create_payload = {\n        \"name\": \"Initial Workflow\",\n        \"description\": \"Initial workflow description\",\n        \"trigger\": {\"type\": \"manual\"},\n        \"steps\": [\n            {\"id\": \"step1\", \"name\": \"Step One\", \"action\": \"http_request\", \"config\": {\"url\": \"https://example.com\"}}\n        ]\n    }\n    try:\n        create_resp = requests.post(\n            f\"{BASE_URL}/api/workflows\",\n            json=create_payload,\n            headers=HEADERS,\n            timeout=TIMEOUT\n        )\n        assert create_resp.status_code == 200\n        create_data = create_resp.json()\n        assert create_data.get(\"success\") is True\n        workflow = create_data.get(\"workflow\")\n        assert workflow is not None\n        workflow_id = workflow.get(\"id\")\n        assert workflow_id is not None\n\n        # Prepare update payload with optional fields\n        update_payload = {\n            \"name\": \"Updated Workflow Name\",\n            \"description\": \"Updated description for the workflow\",\n            \"trigger\": {\"type\": \"schedule\", \"cron\": \"0 12 * * *\"},\n            \"steps\": [\n                {\"id\": \"step1\", \"name\": \"Step One Modified\", \"action\": \"http_request\", \"config\": {\"url\": \"https://updated.example.com\"}},\n                {\"id\": \"step2\", \"name\": \"Step Two\", \"action\": \"email\", \"config\": {\"to\": \"user@example.com\", \"subject\": \"Test\"}}\n            ],\n            \"enabled\": False\n        }\n\n        update_resp = requests.put(\n            f\"{BASE_URL}/api/workflows/{workflow_id}\",\n            json=update_payload,\n            headers=HEADERS,\n            timeout=TIMEOUT\n        )\n        assert update_resp.status_code == 200\n        update_data = update_resp.json()\n        assert update_data.get(\"success\") is True\n        updated_workflow = update_data.get(\"workflow\")\n        assert updated_workflow is not None\n        # Validate updated fields\n        assert isinstance(updated_workflow.get(\"name\"), str)\n        assert updated_workflow.get(\"name\") == update_payload[\"name\"]\n\n        assert isinstance(updated_workflow.get(\"description\"), str)\n        assert updated_workflow.get(\"description\") == update_payload[\"description\"]\n\n        assert isinstance(updated_workflow.get(\"trigger\"), dict)\n        assert updated_workflow.get(\"trigger\") == update_payload[\"trigger\"]\n\n        assert isinstance(updated_workflow.get(\"steps\"), list)\n        assert updated_workflow.get(\"steps\") == update_payload[\"steps\"]\n\n        assert isinstance(updated_workflow.get(\"enabled\"), bool)\n        assert updated_workflow.get(\"enabled\") == update_payload[\"enabled\"]\n\n    finally:\n        # Cleanup - delete the workflow if it was created\n        if workflow_id:\n            try:\n                del_resp = requests.delete(\n                    f\"{BASE_URL}/api/workflows/{workflow_id}\",\n                    headers=HEADERS,\n                    timeout=TIMEOUT\n                )\n                # Accept 200 or 204 as success for delete\n                assert del_resp.status_code in (200, 204)\n                try:\n                    del_data = del_resp.json()\n                    # Some delete endpoints might return success boolean, verify if available\n                    if isinstance(del_data, dict):\n                        assert del_data.get(\"success\") is True\n                except Exception:\n                    pass\n            except Exception:\n                pass\n\ntest_put_api_workflows_id_update_workflow()\n",
    "testStatus": "FAILED",
    "testError": "Traceback (most recent call last):\n  File \"/var/task/handler.py\", line 258, in run_with_retry\n    exec(code, exec_env)\n  File \"<string>\", line 97, in <module>\n  File \"<string>\", line 29, in test_put_api_workflows_id_update_workflow\nAssertionError\n",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-12-29T11:32:38.468Z",
    "modified": "2025-12-29T11:33:53.587Z"
  },
  {
    "projectId": "d2302281-90d5-47b8-ba6b-0a19f928ca6f",
    "testId": "a5b51f7b-4db2-4f2e-b7b6-0a91d13e5cae",
    "userId": "a4784488-80f1-70de-2d83-5dec6933d663",
    "title": "TC009-delete api workflows id delete workflow",
    "description": "Test deleting a workflow by its ID. Verify that the response includes success status and that the workflow is removed from the user's workflows.",
    "code": "import requests\nimport uuid\n\nBASE_URL = \"http://localhost:3001\"\nAUTH_TOKEN = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI1NWVlMDA5OS0wNGU3LTQ2ZGYtODFlZC03ZTlhOTEzYTZmYzUiLCJlbWFpbCI6IlRhbnppcnV6MjVAZ21haWwuY29tIiwiaWF0IjoxNzY3MDA3Njg3LCJleHAiOjE3Njc2MTI0ODd9.PpmhOqjErdNprROET1LwviTjGE4oN0IWoo5cP-CvAos\"\nHEADERS = {\n    \"Authorization\": f\"Bearer {AUTH_TOKEN}\",\n    \"Content-Type\": \"application/json\"\n}\nTIMEOUT = 30\n\n\ndef test_delete_workflow_by_id():\n    # Create a new workflow to ensure we have a workflow to delete\n    create_payload = {\n        \"name\": \"Test Delete Workflow \" + str(uuid.uuid4()),\n        \"description\": \"Workflow created for deletion test\",\n        \"trigger\": {\"type\": \"manual\"},\n        \"steps\": []\n    }\n\n    workflow_id = None\n\n    try:\n        # Create workflow\n        resp_create = requests.post(\n            f\"{BASE_URL}/api/workflows\",\n            headers=HEADERS,\n            json=create_payload,\n            timeout=TIMEOUT\n        )\n        assert resp_create.status_code == 200 or resp_create.status_code == 201\n        json_create = resp_create.json()\n        assert json_create.get(\"success\") is True\n        workflow = json_create.get(\"workflow\")\n        assert workflow and \"id\" in workflow\n        workflow_id = workflow[\"id\"]\n\n        # Delete the workflow by ID\n        resp_delete = requests.delete(\n            f\"{BASE_URL}/api/workflows/{workflow_id}\",\n            headers=HEADERS,\n            timeout=TIMEOUT\n        )\n        assert resp_delete.status_code == 200\n        json_delete = resp_delete.json()\n        assert json_delete.get(\"success\") is True\n\n        # Verify the workflow is removed by fetching all workflows and ensuring it is not present\n        resp_get_all = requests.get(\n            f\"{BASE_URL}/api/workflows\",\n            headers=HEADERS,\n            timeout=TIMEOUT\n        )\n        assert resp_get_all.status_code == 200\n        json_get_all = resp_get_all.json()\n        assert json_get_all.get(\"success\") is True\n        workflows = json_get_all.get(\"workflows\") or []\n        assert all(wf.get(\"id\") != workflow_id for wf in workflows)\n\n    finally:\n        # Cleanup: If workflow still exists (deletion might have failed), attempt delete again to clean\n        if workflow_id:\n            try:\n                requests.delete(\n                    f\"{BASE_URL}/api/workflows/{workflow_id}\",\n                    headers=HEADERS,\n                    timeout=TIMEOUT\n                )\n            except Exception:\n                pass\n\n\ntest_delete_workflow_by_id()",
    "testStatus": "FAILED",
    "testError": "Traceback (most recent call last):\n  File \"/var/task/handler.py\", line 258, in run_with_retry\n    exec(code, exec_env)\n  File \"<string>\", line 74, in <module>\n  File \"<string>\", line 32, in test_delete_workflow_by_id\nAssertionError\n",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-12-29T11:32:38.474Z",
    "modified": "2025-12-29T11:33:33.392Z"
  },
  {
    "projectId": "d2302281-90d5-47b8-ba6b-0a19f928ca6f",
    "testId": "91520047-a332-4e54-b745-e4fd3acf75e1",
    "userId": "a4784488-80f1-70de-2d83-5dec6933d663",
    "title": "TC010-post api workflows id execute manually execute workflow",
    "description": "Test manually triggering execution of a workflow by its ID. Verify that the response includes success status and an execution object detailing the execution status and results.",
    "code": "import requests\n\nBASE_URL = \"http://localhost:3001\"\nTOKEN = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI1NWVlMDA5OS0wNGU3LTQ2ZGYtODFlZC03ZTlhOTEzYTZmYzUiLCJlbWFpbCI6IlRhbnppcnV6MjVAZ21haWwuY29tIiwiaWF0IjoxNzY3MDA3Njg3LCJleHAiOjE3Njc2MTI0ODd9.PpmhOqjErdNprROET1LwviTjGE4oN0IWoo5cP-CvAos\"\nHEADERS = {\n    \"Authorization\": f\"Bearer {TOKEN}\",\n    \"Content-Type\": \"application/json\"\n}\n\ndef test_post_api_workflows_id_execute_manually_execute_workflow():\n    workflow_id = None\n    try:\n        # Step 1: Create a new workflow to ensure we have a valid workflow ID\n        create_payload = {\n            \"name\": \"Test Workflow for Manual Execution\",\n            \"description\": \"Workflow created for test case TC010\",\n            \"trigger\": {\"type\": \"manual\"},\n            \"steps\": [\n                {\n                    \"name\": \"Sample Step\",\n                    \"type\": \"http_request\",\n                    \"config\": {\n                        \"method\": \"GET\",\n                        \"url\": \"https://httpbin.org/get\"\n                    }\n                }\n            ]\n        }\n        create_resp = requests.post(\n            f\"{BASE_URL}/api/workflows\",\n            json=create_payload,\n            headers=HEADERS,\n            timeout=30\n        )\n        assert create_resp.status_code == 200, f\"Expected status code 200, got {create_resp.status_code}\"\n        create_data = create_resp.json()\n        assert create_data.get(\"success\") is True, f\"Expected success True, got {create_data.get('success')}\"\n        workflow = create_data.get(\"workflow\")\n        assert workflow is not None, \"Workflow object is None\"\n        workflow_id = workflow.get(\"id\")\n        assert isinstance(workflow_id, str) and len(workflow_id) > 0, \"Invalid workflow id\"\n\n        # Step 2: Manually execute the workflow by its ID\n        exec_resp = requests.post(\n            f\"{BASE_URL}/api/workflows/{workflow_id}/execute\",\n            headers=HEADERS,\n            timeout=30\n        )\n        assert exec_resp.status_code == 200, f\"Expected status code 200, got {exec_resp.status_code}\"\n        exec_data = exec_resp.json()\n        # Verify success status\n        assert exec_data.get(\"success\") is True, f\"Expected success True, got {exec_data.get('success')}\"\n        # Verify execution object\n        execution = exec_data.get(\"execution\")\n        assert execution is not None and isinstance(execution, dict), \"Execution is None or not a dict\"\n        # Verify execution has required keys (status, step_results, etc.)\n        assert \"status\" in execution, \"Execution missing 'status' key\"\n        assert \"step_results\" in execution, \"Execution missing 'step_results' key\"\n\n    finally:\n        # Clean up: Delete the workflow if created\n        if workflow_id:\n            requests.delete(\n                f\"{BASE_URL}/api/workflows/{workflow_id}\",\n                headers=HEADERS,\n                timeout=30\n            )\n\ntest_post_api_workflows_id_execute_manually_execute_workflow()\n",
    "testStatus": "FAILED",
    "testError": "Traceback (most recent call last):\n  File \"/var/task/handler.py\", line 258, in run_with_retry\n    exec(code, exec_env)\n  File \"<string>\", line 69, in <module>\n  File \"<string>\", line 35, in test_post_api_workflows_id_execute_manually_execute_workflow\nAssertionError: Expected status code 200, got 400\n",
    "testType": "BACKEND",
    "createFrom": "mcp",
    "created": "2025-12-29T11:32:38.479Z",
    "modified": "2025-12-29T11:34:08.854Z"
  }
]
